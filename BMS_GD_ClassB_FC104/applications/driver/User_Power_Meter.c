#include "GlobalVarShared.h"

void Continous_CH_current_C_Check(void);
void Continous_DC_current_C_Check(void);


//放电电流倍率表
#define SOC_DC     21  
#define Temp_DC    18


float Continous_DC_current_C[SOC_DC][Temp_DC]=
{
//-20℃	-10℃	0℃	  10℃	25℃	45℃	50℃ 55℃
	
	{0,0.06,	0.15,	0.3,	0.3,	0.4,	0.4,	  0},  //≤5%  SOC

	{0,0.12,	0.3,	0.5,	0.5,	0.5,	0.5,	  0},  //≤10%  SOC

	{0,0.25,	0.5,	0.5,  0.5,  0.5,	0.5,    0},  //≤20%  SOC

	{0,0.5,	  0.5,	  1,  	1,    1,	  1,    0},  //≤30%  SOC

	{0,0.5,	  0.5,	  1,  	1,    1,	  1,    0},  //≤40%  SOC

	{0,0.5,	  0.5,	  1,  	1,    1,	  1,    0},  //≤50%  SOC

	{0,0.5,	  0.5,	  1,  	1,    1,	  1,    0},  //≤60%  SOC

	{0,0.5,	  0.5,	  1,  	1,    1,	  1,    0},  //≤70%  SOC

	{0,0.5,	  0.5,	  1,  	1,    1,	  1,    0},  //≤80%  SOC

	{0,0.5,	  0.5,	  1,  	1,    1,	  1,    0},  //≤90%  SOC

	{0,0.5,	  0.5,	  1,  	1,    1,	  1,    0},  //≤95%  SOC

	{0,0.5,	  0.5,	  1,  	1,    1,	  1,    0},  //≤100%  SOC
	
};

float Continous_DC1_current_C[SOC_DC][Temp_DC]=
{
//-20℃-10℃  0℃	  10℃	25℃	45℃	50℃  53℃
	
	{0,  0.06,	0.15,	0.3,	0.3,	0.4,	0.4,	0},  //≤5%  SOC

	{0,  0.12,	0.3,	0.5,	0.5,	0.5,	0.5,	0},  //≤10%  SOC

	{0,  0.25,	0.5,	0.5,  0.5,  0.5,	0.5,  0},  //≤20%  SOC

	{0, 0.5,	  0.5,	0.5,  0.5,  0.5,	0.5,  0},  //≤30%  SOC

	{0, 0.5,	  0.5,	0.5,  0.5,  0.5,	0.5,  0},  //≤40%  SOC

	{0, 0.5,	  0.5,	 0.5,  0.5,  0.5,	0.5,  0},  //≤50%  SOC

	{0, 0.5,	  0.5,	 0.5,  0.5,  0.5,	0.5,  0},  //≤60%  SOC

	{0, 0.5,	  0.5,	 0.5,  0.5,  0.5,	0.5,  0},  //≤70%  SOC

	{0, 0.5,	  0.5,	 0.5,  0.5,  0.5,	0.5,  0},  //≤80%  SOC

	{0, 0.5,	  0.5,	 0.5,  0.5,  0.5,	0.5,  0},  //≤90%  SOC

	{0, 0.5,	  0.5,	 0.5,  0.5,  0.5,	0.5,  0},  //≤95%  SOC

	{0, 0.5,	  0.5,	 0.5,  0.5,  0.5,	0.5,  0},  //≤100%  SOC
};

float Continous_DC2_current_C[Temp_DC][SOC_DC]=
{
  //SOC   <=0  (0,5%](5,10%] (10,15%](15,20%](20,25%](25,30%](30,35%](35,40%](40,45%](45,50%](50,55%](55,60%](60,65%](65,70%](70,75%](75,80%](80,85%](85,90%](90,95%](95,100%]

        {0.00,	0.00,	0.00,	0.00,	0.09,	0.11,	0.13,	0.15,	0.17,	0.21,	0.25,	0.25,	0.25,	0.25,	0.25,	0.25,	0.25,	0.25,	0.25,	0.25,	0.25},//<-25℃
        {0.00,	0.00,	0.00,	0.00,	0.13,	0.15,	0.17,	0.25,	0.33,	0.40,	0.47,	0.47,	0.47,	0.47,	0.47,	0.47,	0.47,	0.47,	0.47,	0.47,	0.47},//<-20℃
        {0.00,	0.11,	0.21,	0.30,	0.39,	0.42,	0.45,	0.65,	0.72,	0.77,	0.95,	0.95,	0.95,	0.95,	0.95,	0.95,	0.95,	0.95,	0.95,	0.95,	0.95},//<-15℃
        {0.00,	0.13,	0.24,	0.34,	0.45,	0.57,	0.69,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00},//<-10℃
        {0.00,	0.15,	0.27,	0.39,	0.51,	0.67,	0.83,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00},//<-5℃
        {0.00,	0.18,	0.33,	0.47,	0.61,	0.79,	0.96,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00},//<0℃
        {0.00,	0.21,	0.38,	0.55,	0.71,	0.89,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00},//<5℃
        {0.00,	0.37,	0.53,	0.65,	0.77,	0.93,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00},//<10℃
        {0.00,	0.41,	0.59,	0.71,	0.84,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00},//<15℃
        {0.00,	0.42,	0.63,	0.76,	0.90,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00},//<20℃
        {0.00,	0.43,	0.66,	0.94,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00},//<25℃
        {0.00,	0.90,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00},//<30℃
        {0.00,	0.90,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00},//<35℃
        {0.00,	0.90,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00},//<40℃
        {0.00,	0.90,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00},//<45℃
        {0.00,	0.90,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00},//<50℃
        {0.00,	0.50,	0.50,	0.50,	0.50,	0.50,	0.50,	0.50,	0.50,	0.50,	0.50,	0.50,	0.50,	0.50,	0.50,	0.50,	0.50,	0.50,	0.50,	0.50,	0.50},//<=53℃
        {0.00,	0.1,	0.1,	0.1,	0.1,	0.1,	0.1,	0.1,	0.1,	0.1,	0.1,	0.1,	0.1,	0.1,	0.1,	0.1,	0.1,	0.1,	0.1,	0.1,	0.1},//>53℃
};


void Continous_DC_current_C_Check(void)
{
  static rt_uint8_t  soc_dc=0,temp_dc=0;

    	//判定行标
	if(Sys_info.member.Cell_Tmp_Min<150)//-25
	temp_dc=0;
	else if(Sys_info.member.Cell_Tmp_Min<200)//-20
	temp_dc=1;
    else if(Sys_info.member.Cell_Tmp_Min<250)//-15
	temp_dc=2;
	else if(Sys_info.member.Cell_Tmp_Min<300)//-10
	temp_dc=3;
	else if(Sys_info.member.Cell_Tmp_Min<350)//-5
	temp_dc=4;
	else if(Sys_info.member.Cell_Tmp_Min<400)//0
	temp_dc=5;
	else if(Sys_info.member.Cell_Tmp_Min<450)//5
	temp_dc=6;
	else if(Sys_info.member.Cell_Tmp_Min<500)//10
	temp_dc=7;
	else if(Sys_info.member.Cell_Tmp_Min<550)//15
	temp_dc=8;
	else if(Sys_info.member.Cell_Tmp_Min<600)//20
	temp_dc=9;
    else if(Sys_info.member.Cell_Tmp_Min<650)//25
	temp_dc=10;
	else if(Sys_info.member.Cell_Tmp_Min<700)//30
	temp_dc=11;
	else if(Sys_info.member.Cell_Tmp_Min<750)//35
	temp_dc=12;
	else if(Sys_info.member.Cell_Tmp_Min<800)//40
	temp_dc=13;
    else if(Sys_info.member.Cell_Tmp_Min<850)//45
	temp_dc=14;
	else if(Sys_info.member.Cell_Tmp_Min<900)//50
	temp_dc=15;
	else if(Sys_info.member.Cell_Tmp_Min<=930)//53
	temp_dc=16;
	else
	temp_dc=17;
    
//判定列标   module_soc 1  ---  SOC  0.4%
    if(Sys_info.member.module_soc <= 0)//0
	soc_dc=0;
	else if(Sys_info.member.module_soc<=13)//5
	soc_dc=1;
    else if(Sys_info.member.module_soc<=25)//10
	soc_dc=2;
	else if(Sys_info.member.module_soc<=38)//15
	soc_dc=3;
	else if(Sys_info.member.module_soc<=50)//20
	soc_dc=4;
	else if(Sys_info.member.module_soc<=63)//25
	soc_dc=5;
	else if(Sys_info.member.module_soc<=75)//30
	soc_dc=6;
	else if(Sys_info.member.module_soc<=88)//35
	soc_dc=7;
	else if(Sys_info.member.module_soc<=100)//40
	soc_dc=8;
	else if(Sys_info.member.module_soc<=113)//45
	soc_dc=9;
	else if(Sys_info.member.module_soc<=125)//50
	soc_dc=10;
	else if(Sys_info.member.module_soc<=138)//55
	soc_dc=11;
    else if(Sys_info.member.module_soc<=150)//60
	soc_dc=12;
	else if(Sys_info.member.module_soc<=163)//65
	soc_dc=13;
	else if(Sys_info.member.module_soc<=175)//70
	soc_dc=14;
	else if(Sys_info.member.module_soc<=188)//75
    soc_dc=15;
    else if(Sys_info.member.module_soc<=200)//80
	soc_dc=16;
	else if(Sys_info.member.module_soc<=213)//85
	soc_dc=17;
	else if(Sys_info.member.module_soc<=225)//90
	soc_dc=18;
	else if(Sys_info.member.module_soc<=238)//95
	soc_dc=19;
    else if(Sys_info.member.module_soc<=250)//100
	soc_dc=20;
	else
	soc_dc=0;
	
	
  if(Eeprom_Data0.member.Work_Model == 0)
	Sys_info.member.DC_Allowed_Current=100*Continous_DC2_current_C[temp_dc][soc_dc];
	else if(Eeprom_Data0.member.Work_Model==1)
	Sys_info.member.DC_Allowed_Current=106*Continous_DC_current_C[soc_dc][temp_dc];
	
}

#define SOC_CH     22 
#define Temp_CH    15


float Continous_CH_current_C[SOC_CH][Temp_CH]=
{
	//0    2℃	   5℃	 7℃	 10℃	 25℃	 45℃	 50℃
		
	{0.05, 0.1,	  0.2,	0.2,	0.6,	0.8,	0.8,	0.4,	0},  //≤5%  SOC
		
	{0.05, 0.1,	  0.2,	0.2,	0.6,	  1,	  1,	0.5,	0},  //≤10%  SOC

	{0.05, 0.1,	  0.2,	0.2,	0.6,	  1,	  1,	0.5,	0},  //≤20%  SOC

	{0.05, 0.1,	  0.2,	0.2,	0.6,	  1,	  1,	0.5,	0},  //≤30%  SOC

	{0.05, 0.1,	  0.2,	0.2,	0.6,	  1,	  1,	0.5,	0},  //≤40%  SOC

	{0.05, 0.1,	  0.2,	0.2,	0.4,	  1,	  1,	0.5,	0},  //≤50%  SOC

	{0.05, 0.1,	  0.2,	0.2,	0.4,	  1,	  1,	0.5,	0},  //≤60%  SOC

	{0.05, 0.1,	  0.2,	0.2,	0.4,	  1,	  1,	0.5,	0},  //≤70%  SOC

	{0.05, 0.1,	  0.2,	0.2,	0.2,	  0.5,	  0.5,	0.5,	0},  //≤80%  SOC

	{0.05, 0.06,	0.12,	0.12,	0.2,	0.4,	0.4,	0.4,	0},  //≤90%  SOC

	{0.05, 0.06,	0.12,	0.12,	0.12,	0.2,	0.2,	0.2,	0}   //≤95%  SOC
};
float Continous_CH1_current_C[SOC_CH][Temp_CH]=
{
	//0      2℃	   5℃	 7℃	 10℃	 25℃	 45℃	 50℃
		
	{0.05,	0.1,	  0.2,	0.2,	0.5,	0.5,	0.5,	0.25,	0},  //≤5%  SOC
		
	{0.05,	0.1,	  0.2,	0.2,	0.5,	0.5,	0.5,	0.25,	0},  //≤10%  SOC

	{0.05,	0.1,	  0.2,	0.2,	0.5,	0.5,	0.5,  0.25,	0},  //≤20%  SOC

	{0.05,	0.1,	  0.2,	0.2,	0.5,	0.5,	0.5,	0.25,	0},  //≤30%  SOC

	{0.05,	0.1,	  0.2,	0.2,	0.5,	0.5,	0.5,	0.25,	0},  //≤40%  SOC

	{0.05,	0.1,	  0.2,	0.2,	0.4,	0.5,	0.5,	0.25,	0},  //≤50%  SOC

	{0.05,	0.1,	  0.2,	0.2,	0.4,	0.5,	0.5,	0.25,	0},  //≤60%  SOC

	{0.05,	0.1,	  0.2,	0.2,	0.4,	0.5,	0.5,	0.25,	0},  //≤70%  SOC

	{0.05,	0.1,	  0.2,	0.2,	0.2,	0.5,	0.5,	0.25,	0},  //≤80%  SOC

	{0.05,	0.06,	0.12,	0.12,	0.2,	0.5,	0.5,	0.25,	0},  //≤90%  SOC

	{0.05,	0.06,	0.12,	0.12,	0.12,	0.2,	0.2,	0.2,	0}   //≤95%  SOC
	
};

float Continous_CH2_current_C[SOC_CH][Temp_CH]=
{
//-10℃	＜-5℃	 ＜0℃	＜5℃	＜10℃	＜15℃	＜20℃	＜25℃	＜30℃	＜35℃	＜40℃	＜45℃	＜50℃	＜52℃	≥52℃
    
{0.00,	0.20,	0.30,	0.40,	0.50,	0.50,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	0.50,	0.10,	0.00}, //=0%  SOC
{0.00,	0.20,	0.30,	0.40,	0.50,	0.50,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	0.50,	0.10,	0.00},//≤5%  SOC
{0.00,	0.20,	0.30,	0.40,	0.50,	0.50,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	0.50,	0.10,	0.00},//≤10%  SOC
{0.00,	0.20,	0.30,	0.40,	0.50,	0.50,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	0.50,	0.10,	0.00},//≤15%  SOC
{0.00,	0.20,	0.30,	0.40,	0.50,	0.50,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	0.50,	0.10,	0.00},//≤20%  SOC
{0.00,	0.16,	0.25,	0.33,	0.45,	0.50,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	0.50,	0.10,	0.00},//≤25%  SOC
{0.00,	0.16,	0.25,	0.33,	0.45,	0.50,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	0.50,	0.10,	0.00},//≤30%  SOC
{0.00,	0.16,	0.25,	0.33,	0.45,	0.50,	1.00,	1.00,	1.00,	1.00,	1.00,	1.00,	0.50,	0.10,	0.00},//≤35%  SOC
{0.00,	0.16,	0.25,	0.33,	0.45,	0.50,	0.50,	1.00,	1.00,	1.00,	1.00,	1.00,	0.50,	0.10,	0.00},//≤40%  SOC
{0.00,	0.12,	0.18,	0.25,	0.45,	0.50,	0.50,	1.00,	1.00,	1.00,	1.00,	1.00,	0.50,	0.10,	0.00},//≤45%  SOC
{0.00,	0.12,	0.18,	0.25,	0.35,	0.50,	0.50,	1.00,	1.00,	1.00,	1.00,	1.00,	0.50,	0.10,	0.00},//≤50%  SOC
{0.00,	0.10,	0.18,	0.25,	0.35,	0.45,	0.50,	1.00,	1.00,	1.00,	1.00,	1.00,	0.50,	0.10,	0.00},//≤55%  SOC
{0.00,	0.10,	0.18,	0.25,	0.35,	0.45,	0.50,	1.00,	1.00,	1.00,	1.00,	1.00,	0.50,	0.10,	0.00},//≤60%  SOC
{0.00,	0.07,	0.12,	0.20,	0.30,	0.45,	0.50,	1.00,	1.00,	1.00,	1.00,	1.00,	0.50,	0.10,	0.00},//≤65%  SOC
{0.00,	0.07,	0.12,	0.20,	0.30,	0.35,	0.50,	1.00,	1.00,	1.00,	1.00,	1.00,	0.50,	0.10,	0.00},//≤70%  SOC
{0.00,	0.05,	0.10,	0.15,	0.25,	0.35,	0.40,	1.00,	1.00,	1.00,	1.00,	1.00,	0.50,	0.10,	0.00},//≤75%  SOC
{0.00,	0.05,	0.10,	0.15,	0.20,	0.30,	0.40,	1.00,	1.00,	1.00,	1.00,	1.00,	0.50,	0.10,	0.00},//≤80%  SOC
{0.00,	0.03,	0.07,	0.10,	0.20,	0.30,	0.35,	0.50,	0.50,	0.50,	0.50,	0.50,	0.50,	0.10,	0.00},//≤85%  SOC
{0.00,	0.03,	0.05,	0.10,	0.15,	0.20,	0.35,	0.45,	0.50,	0.50,	0.50,	0.50,	0.50,	0.10,	0.00},//≤90%  SOC
{0.00,	0.03,	0.05,	0.05,	0.10,	0.15,	0.25,	0.33,	0.33,	0.33,	0.33,	0.33,	0.33,	0.10,	0.00},//≤95%  SOC
{0.00,  0.02,	0.03,	0.05,	0.05,	0.10,	0.20,	0.25,	0.33,	0.33,	0.33,	0.33,	0.20,	0.10,	0.00},//≤98%  SOC,
{0.00,  0.02,	0.03,	0.05,	0.05,	0.10,	0.15,	0.20,	0.33,	0.33,	0.33,	0.33,	0.13,	0.10,	0.00},//≤100%  SOC,

////-10℃	＜-5℃	 ＜0℃	＜5℃	＜10℃	＜15℃	＜20℃	＜25℃	＜30℃	＜35℃	＜40℃	＜45℃	＜50℃	＜52℃	≥52℃
//    
//{0.00,	0.20,	0.30,	0.40,	0.50,	0.50,	0.50,	0.50,	0.50,	0.50,	0.50,	0.50,	0.33,	0.10,	0.00}, //=0%  SOC
//{0.00,	0.20,	0.30,	0.40,	0.50,	0.50,	0.50,	0.50,	0.50,	0.50,	0.50,	0.50,	0.33,	0.10,	0.00},//≤5%  SOC
//{0.00,	0.20,	0.30,	0.40,	0.50,	0.50,	0.50,	0.50,	0.50,	0.50,	0.50,	0.50,	0.33,	0.10,	0.00},//≤10%  SOC
//{0.00,	0.20,	0.30,	0.40,	0.50,	0.50,	0.50,	0.50,	0.50,	0.50,	0.50,	0.50,	0.33,	0.10,	0.00},//≤15%  SOC
//{0.00,	0.20,	0.30,	0.40,	0.50,	0.50,	0.50,	0.50,	0.50,	0.50,	0.50,	0.50,	0.33,	0.10,	0.00},//≤20%  SOC
//{0.00,	0.16,	0.25,	0.33,	0.45,	0.50,	0.50,	0.50,	0.50,	0.50,	0.50,	0.50,	0.33,	0.10,	0.00},//≤25%  SOC
//{0.00,	0.16,	0.25,	0.33,	0.45,	0.50,	0.50,	0.50,	0.50,	0.50,	0.50,	0.50,	0.33,	0.10,	0.00},//≤30%  SOC
//{0.00,	0.16,	0.25,	0.33,	0.45,	0.50,	0.50,	0.50,	0.50,	0.50,	0.50,	0.50,	0.33,	0.10,	0.00},//≤35%  SOC
//{0.00,	0.16,	0.25,	0.33,	0.45,	0.50,	0.50,	0.50,	0.50,	0.50,	0.50,	0.50,	0.33,	0.10,	0.00},//≤40%  SOC
//{0.00,	0.12,	0.18,	0.25,	0.45,	0.50,	0.50,	0.50,	0.50,	0.50,	0.50,	0.50,	0.33,	0.10,	0.00},//≤45%  SOC
//{0.00,	0.12,	0.18,	0.25,	0.35,	0.50,	0.50,	0.50,	0.50,	0.50,	0.50,	0.50,	0.33,	0.10,	0.00},//≤50%  SOC
//{0.00,	0.10,	0.18,	0.25,	0.35,	0.45,	0.50,	0.50,	0.50,	0.50,	0.50,	0.50,	0.33,	0.10,	0.00},//≤55%  SOC
//{0.00,	0.10,	0.18,	0.25,	0.35,	0.45,	0.50,	0.50,	0.50,	0.50,	0.50,	0.50,	0.33,	0.10,	0.00},//≤60%  SOC
//{0.00,	0.07,	0.12,	0.20,	0.30,	0.45,	0.50,	0.50,	0.50,	0.50,	0.50,	0.50,	0.33,	0.10,	0.00},//≤65%  SOC
//{0.00,	0.07,	0.12,	0.20,	0.30,	0.35,	0.50,	0.50,	0.50,	0.50,	0.50,	0.50,	0.33,	0.10,	0.00},//≤70%  SOC
//{0.00,	0.05,	0.10,	0.15,	0.25,	0.35,	0.40,	0.50,	0.50,	0.50,	0.50,	0.50,	0.33,	0.10,	0.00},//≤75%  SOC
//{0.00,	0.05,	0.10,	0.15,	0.20,	0.30,	0.40,	0.50,	0.50,	0.50,	0.50,	0.50,	0.33,	0.10,	0.00},//≤80%  SOC
//{0.00,	0.03,	0.07,	0.10,	0.20,	0.30,	0.35,	0.50,	0.50,	0.50,	0.50,	0.50,	0.33,	0.10,	0.00},//≤85%  SOC
//{0.00,	0.03,	0.05,	0.10,	0.15,	0.20,	0.35,	0.45,	0.50,	0.50,	0.50,	0.50,	0.33,	0.10,	0.00},//≤90%  SOC
//{0.00,	0.03,	0.05,	0.05,	0.10,	0.15,	0.25,	0.33,	0.33,	0.33,	0.33,	0.33,	0.33,	0.10,	0.00},//≤95%  SOC
//{0.00,    0.02,	0.03,	0.05,	0.05,	0.10,	0.20,	0.25,	0.33,	0.33,	0.33,	0.33,	0.20,	0.10,	0.00},//≤98%  SOC,
//{0.00,    0.02,	0.03,	0.05,	0.05,	0.10,	0.15,	0.20,	0.33,	0.33,	0.33,	0.33,	0.13,	0.10,	0.00},//≤100%  SOC,

	
};


void Continous_CH_current_C_Check(void)
{
  static rt_uint8_t  soc_ch=0,temp_ch=0;

	//判定行标   module_soc 1  ---  SOC  0.4%
   if(Sys_info.member.module_soc == 0)//0
	soc_ch=0;
	else if(Sys_info.member.module_soc<=13)//5
	soc_ch=1;
    else if(Sys_info.member.module_soc<=25)//10
	soc_ch=2;
	else if(Sys_info.member.module_soc<=38)//15
	soc_ch=3;
	else if(Sys_info.member.module_soc<=50)//20
	soc_ch=4;
	else if(Sys_info.member.module_soc<=63)//25
	soc_ch=5;
	else if(Sys_info.member.module_soc<=75)//30
	soc_ch=6;
	else if(Sys_info.member.module_soc<=88)//35
	soc_ch=7;
	else if(Sys_info.member.module_soc<=100)//40
	soc_ch=8;
	else if(Sys_info.member.module_soc<=113)//45
	soc_ch=9;
	else if(Sys_info.member.module_soc<=125)//50
	soc_ch=10;
	else if(Sys_info.member.module_soc<=138)//55
	soc_ch=11;
    else if(Sys_info.member.module_soc<=150)//60
	soc_ch=12;
	else if(Sys_info.member.module_soc<=163)//65
	soc_ch=13;
	else if(Sys_info.member.module_soc<=175)//70
	soc_ch=14;
	else if(Sys_info.member.module_soc<=188)//75
    soc_ch=15;
    else if(Sys_info.member.module_soc<=200)//80
	soc_ch=16;
	else if(Sys_info.member.module_soc<=213)//85
	soc_ch=17;
	else if(Sys_info.member.module_soc<=225)//90
	soc_ch=18;
	else if(Sys_info.member.module_soc<=238)//95
	soc_ch=19;
    else if(Sys_info.member.module_soc<=245)//98
	soc_ch=20;
    else if(Sys_info.member.module_soc<=250)//100
	soc_ch=21;
	else
    soc_ch=21;        
  
    	//判定列标
	if(Sys_info.member.Cell_Tmp_Min<300)//-10
	temp_ch=0;
	else if(Sys_info.member.Cell_Tmp_Min<350)//-5
	temp_ch=1;
    else if(Sys_info.member.Cell_Tmp_Min<400)//0
	temp_ch=2;
	else if(Sys_info.member.Cell_Tmp_Min<450)//5
	temp_ch=3;
	else if(Sys_info.member.Cell_Tmp_Min<500)//10
	temp_ch=4;
	else if(Sys_info.member.Cell_Tmp_Min<550)//15
	temp_ch=5;
	else if(Sys_info.member.Cell_Tmp_Min<600)//20
	temp_ch=6;
	else if(Sys_info.member.Cell_Tmp_Min<650)//25
	temp_ch=7;
	else if(Sys_info.member.Cell_Tmp_Min<700)//30
	temp_ch=8;
	else if(Sys_info.member.Cell_Tmp_Min<750)//35
	temp_ch=9;
    else if(Sys_info.member.Cell_Tmp_Min<800)//40
	temp_ch=10;
	else if(Sys_info.member.Cell_Tmp_Min<850)//45
	temp_ch=11;
	else if(Sys_info.member.Cell_Tmp_Min<900)//50
	temp_ch=12;
	else if(Sys_info.member.Cell_Tmp_Min<920)//52
	temp_ch=13;
	else
	temp_ch=14;
    	
	if(Eeprom_Data0.member.Work_Model == 0)
	{
			Sys_info.member.CH_Allowed_Current = 100*Continous_CH2_current_C[soc_ch][temp_ch];		
	}
	else if(Eeprom_Data0.member.Work_Model == 1)
	{
			Sys_info.member.CH_Allowed_Current=106*Continous_CH_current_C[soc_ch][temp_ch];	
	}	
	else
	{}
	
	if(Sys_info.member.Work_State == DC_CHARGE_HEAT)
	{
			Sys_info.member.CH_Allowed_Current = 7;//单位A 
	}
}




